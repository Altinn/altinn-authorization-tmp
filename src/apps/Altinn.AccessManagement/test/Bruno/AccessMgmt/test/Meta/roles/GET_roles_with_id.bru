meta {
  name: GET_roles_with_id
  type: http
  seq: 2
}

get {
  url: {{baseUrl}}/accessmanagement/api/v1/meta/info/roles/:id
  body: none
  auth: inherit
}

params:path {
  id: 18baa914-ac43-4663-9fa4-6f5760dc68eb
}

tests {
  test("GET_roles_with_id", function() {
    const data = res.getBody();  
    expect(res.status).to.equal(200);
    const role = data.find(r => r.code === "deltaker-delt-ansvar");
    expect(role, "Expected role deltaker-delt-ansvar").to.exist;
  
    expect(role.name).to.equal("Deltaker delt ansvar");
    expect(role.isKeyRole).to.equal(true);
    expect(role.urn).to.equal("urn:altinn:external-role:ccr:deltaker-delt-ansvar");
    expect(role.legacyRoleCode).to.equal("dtpr");
  
    // Provider check (light but meaningful)
    expect(role.provider.code).to.equal("sys-ccr");
    expect(role.provider.name).to.equal("Enhetsregisteret");
  });
  
}
