meta {
  name: DeleteRules (App) without uuid
  type: http
  seq: 9
}

post {
  url: {{baseUrl}}/accessmanagement/api/v1/delegations/deletepolicy
  body: json
  auth: inherit
}

body:json {
  [
    {
      "ruleIds": [],
      "deletedByUserId": 20000012,
      "policyMatch": {
        "offeredByPartyId": 50002120,
        "resource": [
          {
            "id": "urn:altinn:org",
            "value": "ttd"
          },
          {
            "id": "urn:altinn:app",
            "value": "security-level3-app"
          }
        ],
        "coveredBy": [
          {
            "id": "urn:altinn:userid",
            "value": "20000013"
          }
        ]
      }
    }
  ]
}

script:pre-request {
  var getTokenParameters = {
    auth_app: "sbl.authorization",
    auth_tokenType: "PlatformToken"
  }
  
  const token = await testTokenGenerator.getToken(getTokenParameters);
  bru.setVar("bearerToken",  token);
}
